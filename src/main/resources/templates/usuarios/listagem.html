<!DOCTYPE html>
<html lang="pt-br" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <title>Usuários • MotoMap AI</title>

    <!-- Tailwind CDN (dev). Em produção, gere o build do Tailwind -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
          theme: {
            extend: {
              colors: {
                brand: {
                  50:'#ecffee',100:'#c7ffd0',200:'#9effa9',300:'#72ff85',
                  400:'#49f565',500:'#22d840',600:'#18b035',700:'#128a2c',
                  800:'#0e6924',900:'#0b531e'
                }
              }
            }
          }
        }
    </script>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
    <style>
        html,body{height:100%}
        body{font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial}
    </style>
</head>
<body class="min-h-screen bg-neutral-950 text-neutral-100 selection:bg-brand-400/40">
<!-- BG decorativo -->
<div class="pointer-events-none fixed inset-0 -z-10">
    <div class="absolute -top-24 -left-24 h-72 w-72 rounded-full bg-brand-500/20 blur-3xl"></div>
    <div class="absolute -bottom-24 -right-24 h-72 w-72 rounded-full bg-emerald-400/10 blur-3xl"></div>
    <div class="absolute inset-0 bg-[radial-gradient(ellipse_at_top,rgba(34,216,64,0.06),transparent_60%)]"></div>
</div>

<!-- Header -->
<header class="mx-auto max-w-6xl px-6 pt-8 pb-4">
    <div class="flex items-center justify-between">
        <a th:href="@{/home}" class="inline-flex items-center gap-2 text-neutral-300 hover:text-neutral-100">
            <div class="inline-flex h-9 w-9 items-center justify-center rounded-xl bg-brand-500/10 ring-1 ring-brand-500/30">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 stroke-brand-400" fill="none" viewBox="0 0 24 24" stroke-width="1.6">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M3 12h18M6 12l3-3m-3 3l3 3m12 0l-3-3m3 3l-3 3"/>
                </svg>
            </div>
            <span class="font-semibold">MotoMap <span class="text-brand-400">AI</span></span>
        </a>

        <a th:href="@{/logout}" class="text-sm text-neutral-400 hover:text-neutral-200 hover:underline">Sair</a>
    </div>
</header>

<main class="mx-auto max-w-6xl px-6 pb-16">
    <!-- Título + Ação -->
    <div class="mb-6 flex flex-col items-start justify-between gap-4 sm:flex-row sm:items-center">
        <div>
            <h1 class="text-2xl font-extrabold tracking-tight">Usuários</h1>
            <p class="mt-1 text-sm text-neutral-400">Gerencie as contas de acesso do sistema.</p>
        </div>

        <a th:href="@{/usuarios/novo}"
           class="inline-flex items-center gap-2 rounded-xl bg-brand-500 px-4 py-2.5 text-sm font-semibold text-neutral-900 shadow-lg shadow-brand-500/20 transition hover:bg-brand-400 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand-400/50">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 24 24" fill="currentColor">
                <path d="M11 5h2v6h6v2h-6v6h-2v-6H5v-2h6z"/>
            </svg>
            Adicionar usuário
        </a>
    </div>

    <!-- Mensagens (flash) -->
    <div th:if="${ok}" class="mb-4 rounded-lg border border-emerald-700/40 bg-emerald-900/30 px-4 py-3 text-sm text-emerald-300" th:text="${ok}">Operação realizada.</div>
    <div th:if="${erro}" class="mb-4 rounded-lg border border-red-700/40 bg-red-900/30 px-4 py-3 text-sm text-red-300" th:text="${erro}">Falha na operação.</div>

    <!-- Card da tabela -->
    <div class="overflow-hidden rounded-2xl border border-neutral-800 bg-neutral-900/60 shadow-xl shadow-black/20 backdrop-blur">
        <!-- Cabeçalho -->
        <div class="flex items-center justify-between border-b border-neutral-800 px-5 py-4">
            <div class="text-sm text-neutral-400">
                <span th:text="${#lists.size(usuarios)}">0</span> registros
            </div>
            <!-- (Opcional) busca futura -->
            <!-- <input type="search" placeholder="Buscar..." class="w-56 rounded-lg border border-neutral-800 bg-neutral-900 px-3 py-2 text-sm outline-none focus:border-brand-400 focus:ring-1 focus:ring-brand-400/40"> -->
        </div>

        <!-- Tabela -->
        <div class="overflow-x-auto">
            <table class="min-w-full border-collapse text-sm">
                <thead>
                <tr class="bg-neutral-900/80 text-neutral-300">
                    <th class="px-5 py-3 text-left font-semibold">ID</th>
                    <th class="px-5 py-3 text-left font-semibold">Nome</th>
                    <th class="px-5 py-3 text-left font-semibold">E-mail</th>
                    <th class="px-5 py-3 text-left font-semibold">Tipo</th>
                    <th class="px-5 py-3 text-right font-semibold">Ações</th>
                </tr>
                </thead>

                <!-- Vazio -->
                <tbody th:if="${#lists.isEmpty(usuarios)}">
                <tr>
                    <td colspan="5" class="px-5 py-8 text-center text-neutral-400">
                        Nenhum usuário cadastrado ainda.
                    </td>
                </tr>
                </tbody>

                <!-- Linhas -->
                <tbody th:if="${!#lists.isEmpty(usuarios)}" class="divide-y divide-neutral-800">
                <tr th:each="u : ${usuarios}" class="hover:bg-neutral-900/50">
                    <td class="px-5 py-3 font-medium text-neutral-100" th:text="${u.id}">1</td>
                    <td class="px-5 py-3" th:text="${u.nome}">Fulano da Silva</td>
                    <td class="px-5 py-3">
                        <span class="rounded-md border border-neutral-700 bg-neutral-900 px-2 py-1 text-xs text-neutral-300" th:text="${u.email}">email@empresa.com</span>
                    </td>
                    <td class="px-5 py-3">
                        <span class="rounded-md border border-neutral-700 bg-neutral-900 px-2 py-1 text-xs text-neutral-300" th:text="${u.tipo}">ADMIN</span>
                    </td>
                    <td class="px-5 py-3">
                        <div class="flex items-center justify-end gap-2">
                            <a th:href="@{|/usuarios/editar/${u.id}|}"
                               class="inline-flex items-center gap-1 rounded-lg border border-neutral-700 bg-neutral-900 px-3 py-1.5 font-medium text-neutral-200 transition hover:border-brand-500/50 hover:text-brand-300">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M4 17.25V21h3.75L19.81 8.94l-3.75-3.75L4 17.25zm16.85-10.6a1.003 1.003 0 0 0 0-1.42l-2.08-2.08a1.003 1.003 0 0 0-1.42 0l-1.83 1.83 3.75 3.75 1.58-1.58z"/>
                                </svg>
                                Editar
                            </a>

                            <a th:href="@{|/usuarios/excluir/${u.id}|}"
                               th:attr="onclick=|return confirm('Excluir o usuário ' + '${u.nome}' + '?');|"
                               class="inline-flex items-center gap-1 rounded-lg border border-red-900 bg-red-900/20 px-3 py-1.5 font-medium text-red-300 transition hover:border-red-700 hover:bg-red-900/30">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M6 7h12v2H6V7zm2 3h8l-1 9H9L8 10zm3-6h2l1 2H10l1-2z"/>
                                </svg>
                                Excluir
                            </a>
                        </div>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>

    <!-- Rodapé -->
    <div th:replace="~{fragments/footer :: footer}"></div>
</main>
</body>
</html>
